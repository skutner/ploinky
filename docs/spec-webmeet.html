<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WebMeet Specification - Ploinky</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <header>
        <div class="container">
            <div class="header-content">
                <a href="index.html" class="logo">
                    <div class="logo-icon">🚀</div>
                    <span>Ploinky</span>
                </a>
                <nav>
                    <ul>
                        <li><a href="index.html">Home</a></li>
                        <li><a href="cli-reference.html">CLI Reference</a></li>
                        <li><a href="architecture.html">Architecture</a></li>
                        <li><a href="spec-agent.html">Agent Spec</a></li>
                        <li><a href="webchat.html">WebChat</a></li>
                        <li><a href="spec-webmeet.html" class="active">WebMeet</a></li>
                        <li><button class="theme-toggle" id="themeToggle">🌙</button></li>
                    </ul>
                </nav>
            </div>
        </div>
    </header>

    <main>
        <div class="container">
            <div class="doc-layout">
                <aside class="sidebar">
                    <h3>WebMeet Topics</h3>
                    <ul>
                        <li><a href="#overview">Overview</a></li>
                        <li><a href="#features">Features</a></li>
                        <li><a href="#usage">Usage</a></li>
                        <li><a href="#moderation">Moderation</a></li>
                        <li><a href="#tech-stack">Technology Stack</a></li>
                    </ul>
                </aside>

                <div class="content-wrapper">
                    <div class="doc-section">
                        <h1>WebMeet Specification</h1>
                        <p class="subtitle">Real-time audio and video conferencing within the Ploinky ecosystem.</p>
                    </div>

                    <div class="doc-section" id="overview">
                        <h2>Overview</h2>
                        <p>WebMeet is a video conferencing application built into Ploinky. It allows for real-time audio and video communication between multiple participants, creating a virtual meeting room directly in the browser. It is not just a text-based chat, but a full-fledged video meeting solution.</p>
                    </div>

                    <div class="doc-section" id="features">
                        <h2>Features</h2>
                        <ul style="margin-left: 2rem;">
                            <li><strong>Real-time Audio/Video:</strong> Utilizes WebRTC for high-quality, low-latency peer-to-peer communication.</li>
                            <li><strong>Multi-user Sessions:</strong> Supports multiple participants in a single meeting room.</li>
                            <li><strong>Participant Management:</strong> A dedicated panel lists all participants in the meeting.</li>
                            <li><strong>Speaking Queue:</strong> A system for participants to request to speak, helping to moderate conversations.</li>
                            <li><strong>Audio Controls:</strong> Participants can mute their own microphone and deafen (mute all incoming audio).</li>
                            <li><strong>Broadcasting:</strong> "Go Live" functionality allows users to broadcast their audio and video to the room.</li>
                        </ul>
                    </div>

                    <div class="doc-section" id="usage">
                        <h2>Usage</h2>
                        <p>To start a WebMeet session, use the <code>webmeet</code> command:</p>
                        <pre><code>ploinky webmeet</code></pre>
                        <p>This will start the WebMeet server and provide a URL to access the meeting room. The URL will contain a token for authentication.</p>
                        
                        <h3>Joining a Meeting</h3>
                        <p>To join a meeting, simply open the provided URL in your browser. You will be prompted to enter your name and grant access to your microphone and camera.</p>
                    </div>

                    <div class="doc-section" id="moderation">
                        <h2>Moderation</h2>
                        <p>WebMeet supports the concept of a moderator agent, which can have special privileges to control the meeting.</p>
                        <p>You can specify a moderator agent when starting the WebMeet server:</p>
                        <pre><code>ploinky webmeet MyModeratorAgent</code></pre>
                        <p>The moderator agent can be a custom agent you create to manage meetings, for example, by automatically muting participants, managing the speaking queue, or even transcribing the conversation.</p>
                    </div>

                    <div class="doc-section" id="tech-stack">
                        <h2>Technology Stack</h2>
                        <ul style="margin-left: 2rem;">
                            <li><strong>WebRTC:</strong> The core technology for real-time communication.</li>
                            <li><strong>Node.js:</strong> The backend server for signaling and user management.</li>
                            <li><strong>WebSocket:</strong> Used for signaling and communication between the clients and the server.</li>
                            <li><strong>HTML/CSS/JavaScript:</strong> The frontend application that runs in the browser.</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <footer>
        <div class="container">
            <p>&copy; 2024 Ploinky Project. Built with security and simplicity in mind.</p>
            <p>
                <a href="https://github.com/ploinky/ploinky">GitHub</a> • 
                <a href="index.html">Home</a> • 
                <a href="cli-reference.html">CLI Reference</a>
            </p>
        </div>
    </footer>

    <script>
        // Theme toggle
        const themeToggle = document.getElementById('themeToggle');
        const body = document.body;
        
        const savedTheme = localStorage.getItem('theme') || 'light';
        body.setAttribute('data-theme', savedTheme);
        themeToggle.textContent = savedTheme === 'dark' ? '☀️' : '🌙';
        
        themeToggle.addEventListener('click', () => {
            const currentTheme = body.getAttribute('data-theme');
            const newTheme = currentTheme === 'dark' ? 'light' : 'dark';
            body.setAttribute('data-theme', newTheme);
            localStorage.setItem('theme', newTheme);
            themeToggle.textContent = newTheme === 'dark' ? '☀️' : '🌙';
        });

        // Highlight active section in sidebar
        const sections = document.querySelectorAll('.doc-section[id]');
        const navLinks = document.querySelectorAll('.sidebar a');
        
        window.addEventListener('scroll', () => {
            let current = '';
            sections.forEach(section => {
                const rect = section.getBoundingClientRect();
                if (rect.top <= 100) {
                    current = section.getAttribute('id');
                }
            });
            
            navLinks.forEach(link => {
                link.classList.remove('active');
                if (link.getAttribute('href') === `#${current}`) {
                    link.classList.add('active');
                }
            });
        });
    </script>
</body>
</html>
