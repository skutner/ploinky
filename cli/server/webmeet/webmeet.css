/* Base theme borrowed from WebChat for consistent look */
:root {
  --wa-bg-primary: #0b141a;
  --wa-bg-secondary: #111b21;
  --wa-bg-panel: #202c33;
  --wa-bg-hover: #2a3942;
  --wa-bg-input: #2a3942;
  --wa-bg-message-in: #202c33;
  --wa-bg-message-out: #005c4b;
  --wa-bg-sidebar: #111b21;
  --wa-bg-search: #202c33;
  --wa-bg-chat: #0b141a;

  --wa-text-primary: #e9edef;
  --wa-text-secondary: #8696a0;
  --wa-text-muted: #667781;
  --wa-text-message-out: #e9edef;

  --wa-border: #222d34;
  --wa-border-light: #2a3942;

  --wa-accent: #4b9eff;
  --wa-accent-hover: #71b4ff;
  --wa-accent-faded: rgba(75, 158, 255, 0.18);
  --wa-online: #00a884;
  --wa-typing: #25d366;
  --wa-danger: #ff4b4b;

  --wa-header-height: 59px;
  --wa-composer-height: 56px;

  --wa-shadow-sm: 0 1px 2px rgba(11,20,26,.13);
  --wa-shadow-md: 0 4px 5px -1px rgba(11,20,26,.13);
}

body[data-theme="light"] {
  --wa-bg-primary: #ffffff;
  --wa-bg-secondary: #f0f2f5;
  --wa-bg-panel: #ffffff;
  --wa-bg-hover: #f5f6f6;
  --wa-bg-input: #ffffff;
  --wa-bg-message-in: #ffffff;
  --wa-bg-message-out: #d9fdd3;
  --wa-bg-sidebar: #ffffff;
  --wa-bg-search: #f0f2f5;
  --wa-bg-chat: #efeae2;

  --wa-text-primary: #111b21;
  --wa-text-secondary: #3b4a54;
  --wa-text-muted: #667781;
  --wa-text-message-out: #111b21;

  --wa-border: #e9edef;
  --wa-border-light: #f0f2f5;

  --wa-accent: #1f7ae0;
  --wa-accent-hover: #1c6cc6;
  --wa-accent-faded: rgba(31, 122, 224, 0.18);
  --wa-online: #25d366;
  --wa-typing: #25d366;

  --wa-shadow-sm: 0 1px 2px rgba(0,0,0,.08);
  --wa-shadow-md: 0 1px 3px rgba(11,20,26,.08);
}

* { margin: 0; padding: 0; box-sizing: border-box; }
html, body { height: 100%; overflow: hidden; }
body {
  font-family: "Segoe UI", "Helvetica Neue", Helvetica, Arial, sans-serif;
  font-size: 14.2px;
  background: var(--wa-bg-primary);
  color: var(--wa-text-primary);
  line-height: 1.4;
  -webkit-font-smoothing: antialiased;
  display: flex;
  flex-direction: column;
}

/* Header */
.wa-header {
  height: var(--wa-header-height);
  background: var(--wa-bg-panel);
  border-bottom: 1px solid var(--wa-border);
  padding: 0 16px;
  display: flex;
  align-items: center;
  flex-shrink: 0;
  position: relative;
  z-index: 100;
}

.wa-header-avatar {
  width: 40px;
  height: 40px;
  border-radius: 50%;
  background: var(--wa-bg-hover);
  margin-right: 15px;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 18px;
  color: var(--wa-text-secondary);
}

.wa-header-info { flex: 1; min-width: 0; }
.wa-header-title { font-size: 16px; font-weight: 400; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
.wa-header-status { font-size: 13px; color: var(--wa-text-secondary); margin-top: 2px; }
.wa-header-actions { display: flex; align-items: center; gap: 10px; }

.wa-icon-btn {
  width: 40px;
  height: 40px;
  border-radius: 50%;
  background: transparent;
  border: none;
  color: var(--wa-text-secondary);
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: background 0.2s;
}
.wa-icon-btn:hover { background: var(--wa-bg-hover); }
.wa-icon-btn.active {
  background: var(--wa-accent-faded);
  color: var(--wa-accent);
}
.wa-icon-btn[aria-disabled="true"] {
  opacity: 0.6;
  pointer-events: none;
}

.wa-settings-panel {
  position: absolute;
  top: calc(var(--wa-header-height) + 8px);
  right: 16px;
  width: 240px;
  background: var(--wa-bg-panel);
  border: 1px solid var(--wa-border);
  border-radius: 12px;
  box-shadow: var(--wa-shadow-md);
  padding: 14px;
  display: none;
  flex-direction: column;
  gap: 12px;
  z-index: 150;
}
.wa-settings-panel.show { display: flex; }

.wa-settings-header {
  font-size: 14px;
  font-weight: 600;
  color: var(--wa-text-primary);
}

.wa-settings-row {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 12px;
  font-size: 13px;
  color: var(--wa-text-secondary);
}

.wa-settings-row input[type="checkbox"] {
  width: 18px;
  height: 18px;
  accent-color: var(--wa-accent);
}

.wa-settings-row select {
  flex: 1;
  background: var(--wa-bg-input);
  color: var(--wa-text-primary);
  border: 1px solid var(--wa-border);
  border-radius: 8px;
  padding: 6px 8px;
  font-size: 13px;
}

.wa-settings-label { flex: 1; }

.wa-participants-list { display: flex; flex-direction: column; gap: 4px; }
.wa-video-panel {
  background: var(--wa-bg-input);
  border: 1px solid var(--wa-border);
  border-radius: 12px;
  padding: 12px;
  display: flex;
  flex-direction: column;
  gap: 8px;
}
.wa-video-header { display: flex; justify-content: space-between; align-items: center; font-size: 13px; color: var(--wa-text-secondary); }
.wa-video-shell {
  position: relative;
  width: 100%;
  padding-top: 56.25%;
  background: rgba(0,0,0,0.3);
  border-radius: 10px;
  overflow: hidden;
  cursor: pointer;
}
#vc_video_preview {
  position: absolute;
  inset: 0;
  width: 100%;
  height: 100%;
  object-fit: cover;
  background: #000;
  border-radius: 10px;
}

.wa-screen-overlay { position: fixed; inset: 0; background: rgba(0,0,0,0.65); display: none; align-items: center; justify-content: center; z-index: 400; padding: 32px; }
.wa-screen-overlay.show { display: flex; }
.wa-screen-modal { width: min(90vw, 960px); background: var(--wa-bg-panel); border-radius: 16px; border: 1px solid var(--wa-border); box-shadow: var(--wa-shadow-md); display: flex; flex-direction: column; overflow: hidden; }
.wa-screen-modal-header { display: flex; align-items: center; justify-content: space-between; padding: 12px 16px; border-bottom: 1px solid var(--wa-border); }
.wa-screen-modal-body { background: #000; }
#screenOverlayVideo { width: 100%; height: 60vh; object-fit: contain; background: #000; }

/* Layout */
.wa-main-content { flex: 1; display: flex; overflow: hidden; }
.wa-chat-container { flex: 1; display: flex; flex-direction: row; min-width: 0; }
.wa-chat-area { flex: 1; display: flex; flex-direction: column; background: var(--wa-bg-chat); min-width: 0; position: relative; }
.wa-chat-bg { position: absolute; inset: 0; background: transparent; pointer-events: none; z-index: 0; }
.wa-messages { flex: 1; overflow-y: auto; padding: 16px; display: flex; flex-direction: column; gap: 10px; position: relative; z-index: 1; }

.wa-resizer { width: 6px; cursor: col-resize; background: var(--wa-bg-panel); opacity: 0.4; transition: opacity 0.2s; }
.wa-resizer:hover { opacity: 0.8; }

.wa-side-panel { width: 320px; background: var(--wa-bg-panel); border-left: 1px solid var(--wa-border); display: flex; flex-direction: column; }
.wa-side-panel-header { padding: 16px; border-bottom: 1px solid var(--wa-border); display: flex; justify-content: space-between; align-items: center; }
.wa-side-panel-title { font-size: 15px; font-weight: 600; }
.wa-side-panel-content { padding: 16px; flex: 1; overflow-y: auto; color: var(--wa-text-secondary); }
.wa-side-panel-close { border: none; background: transparent; color: var(--wa-text-secondary); font-size: 22px; cursor: pointer; }

/* Messages */
.wa-message { max-width: 65%; position: relative; animation: fadeInUp 0.3s ease; display: flex; flex-direction: column; gap: 4px; }
.wa-message.in { align-self: flex-start; }
.wa-message.out { align-self: flex-end; }
.wa-message.moderator .wa-message-bubble { border-color: var(--wa-accent); background: rgba(75,158,255,0.12); }
.wa-message.moderator .wa-message-author { color: var(--wa-accent); }
.wa-message.command .wa-message-bubble { font-style: italic; opacity: 0.9; }
.wa-message.forbidden .wa-message-bubble { border-color: var(--wa-danger); background: rgba(255,75,75,0.08); color: var(--wa-danger); }
.wa-message.forbidden .wa-message-author { color: var(--wa-danger); }

.wa-message-author { font-size: 12px; color: var(--wa-text-secondary); }
.wa-message-bubble {
  position: relative;
  padding: 6px 7px 8px 9px;
  border-radius: 7.5px;
  box-shadow: var(--wa-shadow-sm);
  word-wrap: break-word;
  border: 1px solid transparent;
}
.wa-message.out .wa-message-bubble { background: var(--wa-bg-message-out); color: var(--wa-text-message-out); border-top-right-radius: 0; }
.wa-message.in .wa-message-bubble { background: var(--wa-bg-message-in); color: var(--wa-text-primary); border-top-left-radius: 0; }

.wa-message-text { white-space: pre-wrap; padding-right: 60px; min-height: 19px; }
.wa-message-time { position: absolute; bottom: 4px; right: 7px; font-size: 11px; color: var(--wa-text-muted); display: flex; align-items: center; gap: 3px; }

/* Composer */
.wa-composer { display: flex; align-items: flex-end; min-height: var(--wa-composer-height); padding: 10px 16px; gap: 8px; background: var(--wa-bg-panel); border-top: 1px solid var(--wa-border); }
.wa-voice-control {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 4px;
  flex-shrink: 0;
  min-width: 48px;
}
.wa-voice-control .wa-icon-btn { width: 36px; height: 36px; }
.wa-voice-status { font-size: 11px; color: var(--wa-text-secondary); min-height: 15px; }
.wa-composer-input-wrapper { flex: 1; display: flex; background: var(--wa-bg-input); border-radius: 12px; padding: 6px 10px; }
.wa-composer-input {
  flex: 1;
  border: none;
  background: transparent;
  color: var(--wa-text-primary);
  font-family: inherit;
  font-size: 14.5px;
  resize: none;
  outline: none;
  line-height: 20px;
  max-height: 120px;
  padding: 6px 0;
}
.wa-composer-input::placeholder { color: var(--wa-text-muted); }
.wa-composer-actions {
  display: flex;
  align-items: center;
  gap: 6px;
}
.wa-composer-actions .wa-icon-btn {
  width: 38px;
  height: 38px;
}

.wa-send-btn {
  width: 40px;
  height: 40px;
  border-radius: 50%;
  background: var(--wa-accent);
  border: none;
  color: white;
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  transition: background 0.2s;
}
.wa-send-btn:hover { background: var(--wa-accent-hover); }

/* Participants panel */
.wa-participants-panel { width: 280px; background: var(--wa-bg-panel); border-left: 1px solid var(--wa-border); display: flex; flex-direction: column; }
.wa-participants-header { padding: 16px; border-bottom: 1px solid var(--wa-border); }
.wa-participants-content { flex: 1; overflow-y: auto; padding: 16px; }
.wa-participant-item { display: flex; align-items: center; padding: 8px; border-radius: 6px; margin-bottom: 6px; transition: background 0.2s; }
.wa-participant-item:hover { background: var(--wa-bg-hover); }
.wa-participant-name { flex: 1; }
.wa-participant-icons { display: flex; gap: 8px; align-items: center; }
.wa-speaking-icon { color: var(--wa-accent); font-size: 16px; }
.wa-queue-icon { color: var(--wa-text-secondary); font-size: 12px; font-weight: bold; border: 1px solid var(--wa-text-secondary); border-radius: 50%; width: 18px; height: 18px; display: inline-flex; align-items: center; justify-content: center; }

/* Toolbar */
.vc-toolbar { display: flex; gap: 4px; margin-top: 8px; padding: 4px; background: var(--wa-bg-hover); border-radius: 8px; flex-wrap: wrap; }
.vc-toolbar-btn { width: 36px; height: 36px; display: flex; align-items: center; justify-content: center; border: none; background: transparent; color: var(--wa-text-secondary); border-radius: 6px; cursor: pointer; transition: all 0.2s; position: relative; }
.vc-toolbar-btn:hover { background: var(--wa-bg-input); color: var(--wa-text-primary); }
.vc-toolbar-btn:disabled { opacity: 0.4; cursor: not-allowed; }
.vc-toolbar-btn.active { background: var(--wa-accent); color: white; }
.vc-toolbar-btn.danger:hover { background: rgba(255, 75, 75, 0.15); color: var(--wa-danger); }

/* Modals / overlays */
.vc-overlay { position: fixed; inset: 0; background: rgba(0,0,0,0.45); z-index: 30; display: none; }
.vc-overlay.show { display: block; }
.vc-card { position: absolute; left: 50%; top: 50%; transform: translate(-50%, -50%); width: min(900px, 92vw); background: var(--wa-bg-panel); color: var(--wa-text-primary); border: 1px solid var(--wa-border); border-radius: 10px; box-shadow: var(--wa-shadow-md); padding: 14px; }
.vc-text { min-height: 200px; max-height: 60vh; resize: vertical; width: 100%; background: var(--wa-bg-input); color: var(--wa-text-primary); border: 1px solid var(--wa-border); border-radius: 8px; padding: 10px; font-family: inherit; font-size: 14px; }
.vc-row { display: flex; gap: 8px; align-items: center; }
.vc-row.right { justify-content: flex-end; }
.vc-select { background: var(--wa-bg-input); color: var(--wa-text-primary); border: 1px solid var(--wa-border); border-radius: 6px; padding: 6px 8px; }
.vc-hint { color: var(--wa-text-secondary); font-size: 12px; }
.vc-demo { opacity: .6; }
.vc-disconnect-mask { position: fixed; bottom: 0; left: 0; right: 0; height: var(--wa-composer-height); background: rgba(0,0,0,0.7); z-index: 15; display: none; pointer-events: none; }
.vc-disconnect-mask.show { display: block; }

/* Buttons & inputs */
input, textarea, button { background: var(--wa-bg-input); color: var(--wa-text-primary); border: 1px solid var(--wa-border); border-radius: 6px; padding: 8px; font: inherit; }
button { cursor: pointer; }
button:disabled { opacity: 0.5; cursor: not-allowed; }

/* Login container (fallback) */
.login-container { max-width: 420px; margin: 60px auto; padding: 20px; background: var(--wa-bg-panel); border: 1px solid var(--wa-border); border-radius: 10px; box-shadow: var(--wa-shadow-md); }
.login-box { display: flex; gap: 8px; margin-top: 12px; }

/* Animations */
@keyframes fadeInUp { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

/* Responsive */
@media (max-width: 1024px) {
  .wa-side-panel { width: 260px; }
  .wa-participants-panel { width: 240px; }
}

@media (max-width: 768px) {
  body { font-size: 13.5px; }
  .wa-chat-container { flex-direction: column; }
  .wa-resizer, .wa-side-panel, .wa-participants-panel { display: none; }
  .wa-messages { padding: 12px; }
  .wa-composer { padding: 8px; }
}

/* Utility classes reused across WebMeet */
.hidden { display: none !important; }
.wa-status-dot { width: 8px; height: 8px; border-radius: 50%; display: inline-block; background: var(--wa-online); margin-right: 5px; }
.wa-status-dot.offline { background: var(--wa-text-muted); }

.wa-tts-btn { cursor: pointer; border: none; background: transparent; color: inherit; opacity: .7; transition: opacity .2s; }
.wa-tts-btn:hover { opacity: 1; }

/* Specific tweaks for meeting flow */
#vc_disconnect_btn { width: 32px; height: 32px; color: var(--wa-text-secondary); }
#vc_disconnect_btn:hover { color: var(--wa-danger); background: var(--wa-bg-hover); }
.wa-composer .wa-icon-btn { width: 38px; height: 38px; }
.wa-message.in { display: flex; align-items: center; gap: 8px; }
.wa-message.in .wa-tts-btn { opacity: 0; }
.wa-message.in:hover .wa-tts-btn { opacity: 0.7; }
.wa-message-bubble.moderated { border-color: var(--wa-accent); box-shadow: 0 0 0 1px rgba(75,158,255,0.2); }
.wa-moderation-note { font-size: 11px; color: var(--wa-accent); text-transform: uppercase; letter-spacing: 0.04em; margin-bottom: 4px; }
.wa-moderation-detail { font-size: 12px; color: var(--wa-text-secondary); margin-bottom: 6px; }

body[data-page="chat"] .wa-main-content { padding-right: 0; }
body[data-page="chat"] .wa-composer { margin-right: 0; }
.wa-participants-header { padding: 16px; border-bottom: 1px solid var(--wa-border); display: flex; flex-direction: column; gap: 12px; }
.wa-participants-header-row { display: flex; justify-content: space-between; align-items: center; }
.wa-participants-title { margin: 0; font-size: 16px; }
.wa-participants-form { display: flex; gap: 8px; align-items: center; margin: 0; }
.wa-participants-form input { flex: 1; padding: 8px; border: 1px solid var(--wa-border); border-radius: 6px; background: var(--wa-bg-input); color: var(--wa-text-primary); }
.wa-meeting-controls { display: flex; gap: 8px; flex-wrap: wrap; }
.wa-meeting-controls .wa-icon-btn { width: 38px; height: 38px; }
#vc_video_preview { cursor: pointer; }
.wa-screen-flag { font-size: 14px; }
