<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Ploinky Chat</title>
  <link rel="stylesheet" href="__ASSET_BASE__/webchat.css" />
</head>
<body data-page="chat" data-theme="light" data-agent="__AGENT_NAME__" data-container="__CONTAINER_NAME__" data-runtime="__RUNTIME__" data-auth="__REQUIRES_AUTH__" data-base="__BASE_PATH__">
  <svg width="0" height="0" style="position:absolute" aria-hidden="true" focusable="false">
    <defs>
      <symbol id="i-mic" viewBox="0 0 24 24">
        <path d="M12 2.25a3 3 0 0 0-3 3v6a3 3 0 0 0 6 0v-6a3 3 0 0 0-3-3z" />
        <path d="M5.25 11.25a.75.75 0 0 1 1.5 0 5.25 5.25 0 0 0 10.5 0 .75.75 0 0 1 1.5 0 6.75 6.75 0 0 1-6 6.708V21a.75.75 0 0 1-1.5 0v-3.042a6.75 6.75 0 0 1-6-6.708z" />
      </symbol>
      <symbol id="i-mic-off" viewBox="0 0 24 24">
        <path d="M15 10.78V5a3 3 0 0 0-5.248-1.936l8.968 8.968A4.5 4.5 0 0 0 15 10.78z" />
        <path d="M19.22 19.22a.75.75 0 0 1-1.06 0l-1.414-1.415A6.718 6.718 0 0 1 12 18.75V21a.75.75 0 0 1-1.5 0v-2.25a6.752 6.752 0 0 1-5.25-6.592.75.75 0 0 1 1.5 0 5.25 5.25 0 0 0 5.25 5.25c.892 0 1.735-.22 2.475-.607l-1.54-1.54A3 3 0 0 1 9 12.75V10.5a.75.75 0 0 1 1.5 0v2.25a1.5 1.5 0 0 0 2.506 1.1l-7.7-7.7a.75.75 0 0 1 1.06-1.06l12.854 12.85a.75.75 0 0 1 0 1.06z" />
      </symbol>
    </defs>
  </svg>
  <div class="wa-header">
    <div class="wa-header-avatar">
      <span id="avatarInitial"></span>
    </div>
    <div class="wa-header-info">
      <div class="wa-header-title" id="titleBar"></div>
      <div class="wa-header-status" id="status">
        <span class="wa-status-dot offline"></span>
        <span id="statusText">disconnected</span>
      </div>
    </div>
    <div class="wa-header-actions">
      <button class="wa-icon-btn" id="settingsBtn" title="Settings">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor"><path d="M19.14 12.94c.04-.3.06-.61.06-.94s-.02-.64-.06-.94l2.03-1.58a.5.5 0 0 0 .12-.64l-1.92-3.32a.5.5 0 0 0-.6-.22l-2.39.96a7.07 7.07 0 0 0-1.63-.94l-.36-2.54A.5.5 0 0 0 14.9 2h-3.8a.5.5 0 0 0-.5.43l-.36 2.54a7.07 7.07 0 0 0-1.63.94l-2.39-.96a.5.5 0 0 0-.6.22L3.2 8.49a.5.5 0 0 0 .12.64l2.03 1.58c-.04.3-.06.61-.06.94s.02.64.06.94l-2.03 1.58a.5.5 0 0 0-.12.64l1.92 3.32a.5.5 0 0 0 .6.22l2.39-.96c.5.38 1.05.7 1.63.94l.36 2.54a.5.5 0 0 0 .5.43h3.8a.5.5 0 0 0 .5-.43l.36-2.54c.58-.24 1.13-.56 1.63-.94l2.39.96a.5.5 0 0 0 .6-.22l1.92-3.32a.5.5 0 0 0-.12-.64l-2.03-1.58zm-7.14 2.56a2.5 2.5 0 1 1 0-5 2.5 2.5 0 0 1 0 5z"/></svg>
      </button>
    </div>
  </div>

  <div class="wa-settings-panel" id="settingsPanel">
    <div class="wa-settings-section">
      <div class="wa-settings-header">Voice</div>
      <label class="wa-settings-row">
        <input type="checkbox" id="sttEnable" checked />
        <span>Enable speech dictation</span>
      </label>
      <label class="wa-settings-row">
        <span class="wa-settings-label">Recognition language</span>
        <select id="sttLang"></select>
      </label>
    </div>
    <div class="wa-settings-divider"></div>
    <div class="wa-settings-section">
      <div class="wa-settings-header">Appearance</div>
      <div class="wa-settings-row">
        <span class="wa-settings-label">Theme</span>
        <button class="wa-icon-btn" id="themeToggle" title="Toggle theme">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor"><path d="M12 18c-3.3 0-6-2.7-6-6s2.7-6 6-6 6 2.7 6 6-2.7 6-6 6zm0-10c-2.2 0-4 1.8-4 4s1.8 4 4 4 4-1.8 4-4-1.8-4-4-4z"/><path d="M13 4h-2V2h2v2zm0 18h-2v-2h2v2zm9-11h-2V9h2v2zM4 13H2v-2h2v2z"/></svg>
        </button>
      </div>
      <label class="wa-settings-row">
        <span class="wa-settings-label">"View more" line limit</span>
        <input type="number" id="viewMoreLines" min="1" step="1" value="1000" />
      </label>
    </div>
  </div>

  <div class="wa-connection-banner" id="connBanner">
    <span id="bannerText">Connecting…</span>
  </div>

  <div class="wa-main-content">
    <div class="wa-chat-container" id="chatContainer">
      <div class="wa-chat-area" id="chatArea">
        <div class="wa-chat-bg"></div>
        <div class="wa-messages" id="chatList">
          <div class="wa-message in wa-typing" id="typingIndicator" aria-hidden="true">
            <div class="wa-message-bubble">
              <div class="wa-typing-dots" role="status" aria-live="polite" aria-label="Processing">
                <span></span>
                <span></span>
                <span></span>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="wa-resizer" id="sidePanelResizer" aria-label="Resize panel" title="Drag to resize"></div>
      <div class="wa-side-panel" id="sidePanel">
        <div class="wa-side-panel-header">
          <h3 class="wa-side-panel-title">Full Answer</h3>
          <button class="wa-side-panel-close" id="sidePanelClose" aria-label="Close">&times;</button>
        </div>
        <div class="wa-side-panel-content">
          <div id="sidePanelContent" class="wa-side-panel-body"></div>
        </div>
      </div>
    </div>
  </div>

  <div class="wa-composer">
    <div class="wa-voice-control">
      <button class="wa-icon-btn" id="sttBtn" title="Voice input" aria-pressed="false">
        <span class="wa-mic-icon on" aria-hidden="true">
          <svg width="24" height="24" role="img" aria-label="Microphone"><use href="#i-mic" /></svg>
        </span>
        <span class="wa-mic-icon off" aria-hidden="true">
          <svg width="24" height="24" role="img" aria-label="Mute"><use href="#i-mic-off" /></svg>
        </span>
      </button>
      <span class="wa-voice-status" id="sttStatus">Initializing…</span>
    </div>
    <div class="wa-composer-input-wrapper">
      <textarea 
        id="cmd" 
        class="wa-composer-input" 
        rows="1" 
        placeholder="Type a message"
        autocomplete="off"
      ></textarea>
    </div>
    <button class="wa-send-btn" id="send" title="Send">
      <svg width="24" height="24" viewBox="0 0 24 24" fill="white"><path d="M2.01 21L23 12 2.01 3 2 10l15 2-15 2z"/></svg>
    </button>
  </div>
  <script src="__ASSET_BASE__/markdown.js"></script>
  <script src="__ASSET_BASE__/chat.js"></script>
</body>
</html>
