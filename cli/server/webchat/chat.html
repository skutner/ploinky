<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Ploinky Chat</title>
  <link rel="stylesheet" href="__ASSET_BASE__/webchat.css" />
</head>
<body data-page="chat" data-theme="light" data-agent="__AGENT_NAME__" data-container="__CONTAINER_NAME__" data-runtime="__RUNTIME__" data-auth="__REQUIRES_AUTH__">
  <div class="wa-header">
    <div class="wa-header-avatar">
      <span>P</span>
    </div>
    <div class="wa-header-info">
      <div class="wa-header-title" id="titleBar"></div>
      <div class="wa-header-status" id="status">
        <span class="wa-status-dot offline"></span>
        <span id="statusText">disconnected</span>
      </div>
    </div>
    <div class="wa-header-actions">
      <button class="wa-icon-btn" id="themeToggle" title="Toggle theme">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor"><path d="M12 18c-3.3 0-6-2.7-6-6s2.7-6 6-6 6 2.7 6 6-2.7 6-6 6zm0-10c-2.2 0-4 1.8-4 4s1.8 4 4 4-1.8 4-4-1.8-4-4-4z"/><path d="M13 4h-2v-2h2v2zm0 18h-2v-2h2v2zm9-11h-2v-2h2v2zm-18 0h-2v-2h2v2z"/></svg>
      </button>
      <button class="wa-icon-btn" id="moreBtn" title="More options">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor"><path d="M12 16a2 2 0 1 0 0 4 2 2 0 0 0 0-4zm0-6a2 2 0 1 0 0 4 2 2 0 0 0 0-4zm0-6a2 2 0 1 0 0 4 2 2 0 0 0 0-4z"/></svg>
      </button>
    </div>
  </div>

  <div class="wa-connection-banner" id="connBanner">
    <span id="bannerText">Connectingâ€¦</span>
  </div>

  <div class="wa-main-content">
    <div class="wa-chat-container" id="chatContainer">
      <div class="wa-chat-area" id="chatArea">
        <div class="wa-chat-bg"></div>
        <div class="wa-messages" id="chatList"></div>
      </div>
      <div class="wa-resizer" id="sidePanelResizer" aria-label="Resize panel" title="Drag to resize"></div>
      <div class="wa-side-panel" id="sidePanel">
        <div class="wa-side-panel-header">
          <h3 class="wa-side-panel-title">Full Message</h3>
          <button class="wa-side-panel-close" id="sidePanelClose" aria-label="Close">&times;</button>
        </div>
        <div class="wa-side-panel-content">
          <pre id="sidePanelContent"></pre>
        </div>
      </div>
    </div>
  </div>

  <div class="wa-composer">
    <button class="wa-icon-btn" id="sttBtn" title="Voice input">
      <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor"><path d="M12 14c1.66 0 3-1.34 3-3V5c0-1.66-1.34-3-3-3S9 3.34 9 5v6c0 1.66 1.34 3 3 3zm-1.2-9.1c0-.66.54-1.2 1.2-1.2s1.2.54 1.2 1.2v6.2c0 .66-.54 1.2-1.2 1.2s-1.2-.54-1.2-1.2V4.9zm6.5 6.1c0 3-2.54 5.1-5.3 5.1S6.7 14 6.7 11H5c0 3.41 2.72 6.23 6 6.72V21h2v-3.28c3.28-.49 6-3.31 6-6.72h-1.7z"/></svg>
    </button>
    <div class="wa-composer-input-wrapper">
      <textarea 
        id="cmd" 
        class="wa-composer-input" 
        rows="1" 
        placeholder="Type a message"
        autocomplete="off"
      ></textarea>
    </div>
    <button class="wa-send-btn" id="send" title="Send">
      <svg width="24" height="24" viewBox="0 0 24 24" fill="white"><path d="M2.01 21L23 12 2.01 3 2 10l15 2-15 2z"/></svg>
    </button>
  </div>

  <!-- STT Overlay -->
  <div id="sttOverlay" class="vc-overlay" style="--wa-bg-panel: #202c33; --wa-text-primary: #e9edef; --wa-border: #222d34; --wa-shadow-md: 0 4px 5px -1px rgba(11,20,26,.13); --wa-bg-input: #2a3942; --wa-text-secondary: #8696a0;">
    <div class="vc-card">
      <div class="vc-row" style="justify-content:space-between;margin-bottom:8px">
        <h3 style="margin:0">Voice Input</h3>
        <div class="vc-row">
          <label style="font-size:12px;margin-right:8px">
            <input type="checkbox" id="sttEnable" checked /> Enable voice
          </label>
          <select id="sttLang" class="vc-select"></select>
        </div>
      </div>
      <textarea id="sttText" class="vc-text" placeholder="Speak or type your message..."></textarea>
      <div class="vc-row" style="margin-top:8px;justify-content:space-between">
        <div class="vc-hint" id="sttStatus">Ready</div>
        <div class="vc-row">
          <button class="wa-btn" id="sttRecord">Start Recording</button>
          <button class="wa-btn" id="sttSend">Send</button>
          <button class="wa-btn" id="sttCancel">Cancel</button>
        </div>
      </div>
    </div>
  </div>
  <style>
    .vc-overlay{position:fixed;inset:0;background:rgba(0,0,0,0.45);z-index:30;display:none}
    .vc-card{position:absolute;left:50%;top:50%;transform:translate(-50%,-50%);width:min(900px,92vw);background:var(--wa-bg-panel);color:var(--wa-text-primary);border:1px solid var(--wa-border);border-radius:10px;box-shadow:var(--wa-shadow-md);padding:14px}
    .vc-text{min-height:200px;max-height:60vh;resize:vertical;width:100%;background:var(--wa-bg-input);color:var(--wa-text-primary);border:1px solid var(--wa-border);border-radius:8px;padding:10px;font-family:inherit;font-size:14px}
    .vc-row{display:flex;gap:8px;align-items:center}
    .vc-select{background:var(--wa-bg-input);color:var(--wa-text-primary);border:1px solid var(--wa-border);border-radius:6px;padding:6px 8px}
    .vc-hint{color:var(--wa-text-secondary);font-size:12px}
  </style>

  <script src="__ASSET_BASE__/chat.js"></script>
</body>
</html>
